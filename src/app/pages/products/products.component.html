<section class="bg-background dark:bg-background-dark my-20">
  <input
    type="search"
    id="search"
    class="block mx-auto mb-4 w-3/4 lg:w-1/2 p-2.5 rounded-lg border shadow-sm text-sm dark:bg-[#272B30] dark:border-[#32383E] dark:placeholder:text-text2-dark dark:text-text2-dark dark:focus:border-[#304C72] dark:focus:ring-border1-dark dark:focus:border-[3px] bg-[white] border-[#cfcfcf] focus:border-[#B7D0F3] focus:ring-[#B7D0F3] focus:border-[2px]"
    placeholder="Search by name..."
    [(ngModel)]="searchTerm"
  />

  <div class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-10">
    @for (prod of products| search : searchTerm ; track prod.id) {

    <div
      class="hover:shadow-borderhover dark:hover:shadow-borderhover-dark hover:shadow-lg w-full card max-w-sm border border-border1 dark:border-border1-dark rounded-lg transition-all duration-[.5s]"
    >
      <div>
        <a [routerLink]="['/details', prod.id]">
          <img
            class="p-8 rounded-t-lg object-contain"
            [src]="prod.imageCover"
            [alt]="prod.title"
          />
        </a>
        <div class="px-5 pb-5">
          <a>
            <h4
              class="text-xl font-semibold tracking-tight text-text1 dark:text-[#7777bd]"
            >
              {{ prod.category.name | uppercase }}
            </h4>
            <h5 class="font-semibold tracking-tight text-text2 dark:text-text2">
              {{ prod.title.split(" ", 2).join(" ") }}
            </h5>
          </a>
          <div class="flex items-center mt-2.5 mb-5 me-auto">
            <div>
              <i class="fa-solid fa-heart text-3xl dark:text-text2-dark"></i>
            </div>

            <div class="flex items-center p-0 ms-auto">
              <svg
                class="w-4 h-4 text-star"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                viewBox="0 0 22 20"
              >
                <path
                  d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
                />
              </svg>
            </div>
            <span
              class="bg-rating text-text1 dark:bg-text1 dark:text-rating text-xs font-semibold px-2.5 py-0.5 rounded-sm dark:bg-blue-200 dark:text-blue-800"
              >{{ prod.ratingsAverage }}</span
            >
          </div>
          <div class="flex items-center justify-between">
            <span class="text-xl font-bold text-text1 dark:text-text2">{{
              prod.price | currency : "GBP"
            }}</span>
          </div>
        </div>
      </div>

      <div class="text-center mb-1">
        <button
          (click)="addTocart(prod.id)"
          class="text-text2-dark bg-btn hover:bg-Hoverbtn dark:bg-[#1C8ADB] dark:hover:bg-blue-400 font-medium rounded-lg text-sm px-12 py-2.5 text-center transition-all duration-[.5s]"
        >
          Add to cart
        </button>
      </div>
    </div>
    }
  </div>
</section>
